(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{37:function(e,t,a){e.exports=a(54)},48:function(e,t){},49:function(e,t,a){},50:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),c=a.n(o),i=a(19),s=a(11),l=a(17),u=a(30),m=a(32),d=a(14),h=a(1),p=a.n(h),b=a(33),f=a.n(b),v=function(e){var t,a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=f()(e).toString(),n.next=3,p.a.awrap(fetch("https://www.gravatar.com/avatar/".concat(t)));case 3:return a=n.sent,n.abrupt("return",a.url);case 5:case"end":return n.stop()}}))},y=function(){var e;return p.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return e=t.sent,t.next=5,p.a.awrap(e);case 5:return t.abrupt("return",t.sent.json());case 6:case"end":return t.stop()}}))},g=function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(e)));case 2:return t=a.sent,a.next=5,p.a.awrap(t);case 5:return a.abrupt("return",a.sent.json());case 6:case"end":return a.stop()}}))},k={name:"",email:"",avatar:"",token:"",score:0};var O={questions:[],isGameReady:!0};var E=Object(l.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN":return Object(d.a)({},e,{name:t.payload.name,email:t.payload.email});case"USER_AVATAR":return Object(d.a)({},e,{avatar:t.payload});case"USER_TOKEN":return Object(d.a)({},e,{token:t.payload.token});case"GAME_SCORE":return Object(d.a)({},e,{score:t.payload});default:return e}},game:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GAME_QUESTIONS":return Object(d.a)({},e,{questions:t.payload.results,isGameReady:!1});default:return e}}}),j=Object(l.createStore)(E,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));window.Cypress&&(window.store=j);var C=j,w=(a(49),a(13)),S=a(20),x=a(4),N=a(5),A=a(7),T=a(6),R=a(3),I=a(8),G=function(e){function t(){return Object(x.a)(this,t),Object(A.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props,t=e.state,a=t.name,n=t.email,o=e.disabled,c=e.handleChange,i=e.handleSubmit;return r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"name"},"Nome:",r.a.createElement("input",{"data-testid":"input-player-name",type:"text",id:"name",placeholder:"Digite o seu nome",value:a,onChange:c})),r.a.createElement("label",{htmlFor:"email"},"Email:",r.a.createElement("input",{"data-testid":"input-gravatar-email",type:"email",id:"email",placeholder:"email@email.com",value:n,onChange:c})),r.a.createElement("button",{"data-testid":"btn-play",disabled:o,type:"button",onClick:i},"Jogar"))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(A.a)(this,Object(T.a)(t).call(this,e))).state={name:"",email:""},a.handleChange=a.handleChange.bind(Object(R.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(R.a)(a)),a.switchToSettings=a.switchToSettings.bind(Object(R.a)(a)),a}return Object(I.a)(t,e),Object(N.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.id,n=t.value;this.setState(Object(S.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=this.props,t=e.history,a=e.setLogin,n=e.getToken,r=this.state,o=r.name,c=r.email;a({name:o,email:c});var i={player:{name:o,assertions:0,score:0,gravatarEmail:c}};localStorage.setItem("state",JSON.stringify(i)),n(),t.push("/game")}},{key:"switchToSettings",value:function(){this.props.history.push("/settings")}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=!(t&&a);return r.a.createElement("main",null,r.a.createElement(G,{state:this.state,disabled:n,handleChange:this.handleChange,handleSubmit:this.handleSubmit}),r.a.createElement("button",{"data-testid":"btn-settings",type:"button",onClick:this.switchToSettings},"Configura\xe7\xf5es"))}}]),t}(n.Component),q=Object(s.b)(null,(function(e){return{getToken:function(){return e((function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(y());case 2:t=a.sent,e({type:"USER_TOKEN",payload:t});case 4:case"end":return a.stop()}}))}))},setLogin:function(t){return e({type:"USER_LOGIN",payload:t})}}}))(_),J=a(36),P=(a(50),function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(A.a)(this,Object(T.a)(t).call(this,e))).state={correctColor:"",wrongColor:"",assertions:0,scorePlayer:0,timer:30,nextAsk:!1,changeAsk:0},a.onClickColorCorrect=a.onClickColorCorrect.bind(Object(R.a)(a)),a.onClickColorIncorrect=a.onClickColorIncorrect.bind(Object(R.a)(a)),a.calcScore=a.calcScore.bind(Object(R.a)(a)),a.setLocalStorage=a.setLocalStorage.bind(Object(R.a)(a)),a.cancelTime=a.cancelTime.bind(Object(R.a)(a)),a.showBtnNext=a.showBtnNext.bind(Object(R.a)(a)),a.showNextAsk=a.showNextAsk.bind(Object(R.a)(a)),a.buttonNext=a.buttonNext.bind(Object(R.a)(a)),a}return Object(I.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){this.setTimer()}},{key:"onClickColorCorrect",value:function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=this.state.timer,this.setState({correctColor:"correctColor",wrongColor:"wrongColor"}),a.next=4,p.a.awrap(this.calcScore(e,t));case 4:this.setLocalStorage(),this.showBtnNext();case 6:case"end":return a.stop()}}),null,this)}},{key:"onClickColorIncorrect",value:function(){this.setState({correctColor:"correctColor",wrongColor:"wrongColor"}),this.showBtnNext()}},{key:"setTimer",value:function(){var e=this,t=setInterval((function(){e.setState((function(e){return{timer:e.timer-1}})),e.cancelTime(t)}),1e3)}},{key:"setLocalStorage",value:function(){var e=this.state,t=e.assertions,a=e.scorePlayer,n=this.props,r=n.email,o={player:{name:n.name,assertions:t,score:a,gravatarEmail:r}};localStorage.setItem("state",JSON.stringify(o))}},{key:"cancelTime",value:function(e){0===this.state.timer&&(clearTimeout(e),this.onClickColorCorrect())}},{key:"calcScore",value:function(e,t){var a=this.state.scorePlayer,n=this.props.getScore,r=0;console.log(t),"hard"===e&&(r=10+3*t),"medium"===e&&(r=10+2*t),"easy"===e&&(r=10+1*t),this.setState((function(e){return{scorePlayer:a+r,assertions:e.assertions+1}})),n(a)}},{key:"showBtnNext",value:function(){this.setState({nextAsk:!0})}},{key:"showNextAsk",value:function(){var e=this.props.history;if(4===this.state.changeAsk)return e.push("/feedback");this.setState((function(e){return{changeAsk:e.changeAsk+1,nextAsk:!1}}))}},{key:"header",value:function(e,t,a){return r.a.createElement("header",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:e,alt:""}),r.a.createElement("span",{"data-testid":"header-player-name"},t),r.a.createElement("span",{"data-testid":"header-score"},"Pontos: ".concat(a)))}},{key:"buttonNext",value:function(){return r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.showNextAsk},"Pr\xf3xima")}},{key:"render",value:function(){var e=this,t=this.state,a=t.correctColor,n=t.wrongColor,o=t.timer,c=t.scorePlayer,i=t.nextAsk,s=t.changeAsk,l=this.props,u=l.question,m=l.name,d=l.avatar,h=r.a.createElement("button",{onClick:function(){return e.onClickColorCorrect(u[s].difficulty)},disabled:0===o,"data-testid":"correct-answer",type:"button",id:"correct",className:a},u[s].correct_answer),p=u[s].incorrect_answers.map((function(t,a){return r.a.createElement("button",{onClick:e.onClickColorIncorrect,"data-testid":"wrong-answer-".concat(a),disabled:0===o,type:"button",id:"answer",key:t,className:n},t)})),b=[h].concat(Object(J.a)(p)).sort((function(){return Math.random()-5}));console.log(b);var f=b.map((function(e){return r.a.createElement("li",{key:e},e)}));return r.a.createElement("div",null,this.header(d,m,c),r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"question-category"},u[s].category),r.a.createElement("h1",{"data-testid":"question-text"},u[s].question),r.a.createElement("ul",null,f),r.a.createElement("div",null,"Tempo Restante: ".concat(o))),i&&this.buttonNext())}}]),t}(n.Component));var M=Object(w.f)(Object(s.b)((function(e){return{name:e.user.name,email:e.user.email,avatar:e.user.avatar}}),(function(e){return{getScore:function(t){return e({type:"GAME_SCORE",payload:t})}}}))(P)),L=function(e){function t(){return Object(x.a)(this,t),Object(A.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(N.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.email,a=e.token,n=e.getAvatar,r=e.getQuestions;n(t),r(a),localStorage.setItem("token",JSON.stringify(a))}},{key:"render",value:function(){var e=this.props,t=e.questions,a=e.isGameReady;return r.a.createElement("main",null,!a&&r.a.createElement(M,{question:t}))}}]),t}(n.Component),U=Object(s.b)((function(e){return{name:e.user.name,email:e.user.email,token:e.user.token,questions:e.game.questions,isGameReady:e.game.isGameReady,playerScore:e.user.score}}),(function(e){return{getAvatar:function(t){return e(function(e){return function(t){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(v(e));case 2:a=n.sent,t({type:"USER_AVATAR",payload:a});case 4:case"end":return n.stop()}}))}}(t))},getQuestions:function(t){return e(function(e){return function(t){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p.a.awrap(g(e));case 2:a=n.sent,t({type:"GAME_QUESTIONS",payload:a});case 4:case"end":return n.stop()}}))}}(t))}}}))(L),B=function(e){function t(){var e;return Object(x.a)(this,t),(e=Object(A.a)(this,Object(T.a)(t).call(this))).handleClick=e.handleClick.bind(Object(R.a)(e)),e}return Object(I.a)(t,e),Object(N.a)(t,[{key:"handleClick",value:function(e,t,a){var n=this.props.history,r=JSON.parse(localStorage.getItem("ranking"))||[],o={name:e,score:t,picture:a};r.push(o),localStorage.setItem("ranking",JSON.stringify(r)),n.push("/ranking")}},{key:"render",value:function(){var e=this,t=this.props,a=t.avatar,n=t.name,o=t.history,c=JSON.parse(localStorage.getItem("state")).player,i=c.assertions,s=c.score;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:a,alt:""}),r.a.createElement("span",{"data-testid":"header-player-name"},n),"Pontos:",r.a.createElement("span",{"data-testid":"header-score"},s)),r.a.createElement("div",{"data-testid":"feedback-text"},i>=3?"Mandou bem!":"Podia ser melhor..."),"Placar final:",r.a.createElement("div",{"data-testid":"feedback-total-score"},s),"Total de acertos:",r.a.createElement("div",{"data-testid":"feedback-total-question"},i),r.a.createElement("button",{"data-testid":"btn-play-again",type:"button",onClick:function(){o.push("/")}},"Jogar novamente"),r.a.createElement("button",{"data-testid":"btn-ranking",type:"button",onClick:function(){return e.handleClick(n,s,a)}},"Ver Ranking"))}}]),t}(n.Component),D=Object(s.b)((function(e){return{name:e.user.name,email:e.user.email,avatar:e.user.avatar,isGameReady:e.game.isGameReady}}))(B),Q=function(e){function t(){return Object(x.a)(this,t),Object(A.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){var e=this.props.history,t=JSON.parse(localStorage.getItem("ranking")).sort((function(e,t){return e.score>t.score?-1:1}));return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("img",{src:e.picture,alt:""}),r.a.createElement("div",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("div",null,"Score ".concat(e.score)))}))),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){return e.push("/")}},"Home"))}}]),t}(n.Component),V=function(e){function t(){return Object(x.a)(this,t),Object(A.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(N.a)(t,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("h1",{"data-testid":"settings-title"},"Settings Page"))}}]),t}(n.Component);a(53);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,{basename:"/trybe-project-trivia-react-redux"},r.a.createElement(s.a,{store:C},r.a.createElement((function(){return r.a.createElement("div",{className:"App"},r.a.createElement(w.c,null,r.a.createElement(w.a,{path:"/ranking",component:Q}),r.a.createElement(w.a,{path:"/settings",component:V}),r.a.createElement(w.a,{path:"/feedback",component:D}),r.a.createElement(w.a,{path:"/game",component:U}),r.a.createElement(w.a,{exact:!0,path:"/",component:q})))}),null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.d0f256bc.chunk.js.map